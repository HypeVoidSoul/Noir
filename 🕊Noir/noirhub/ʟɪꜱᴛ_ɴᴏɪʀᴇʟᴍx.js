try {
const {
…¥·¥è…™ Ä è·¥õ,
notneeded,
…¥·¥è…™ Ä·¥ç·¥Äx,
…¥·¥è…™ Ä·¥†·¥è ü,
 ô·¥è·¥õÍú∞…™x,
…¥·¥è…™ Ä·¥Ñ ü·¥á·¥Ä…¥·¥á Ä,
} = require("../noirtem/noir_env");
const { play } = require("./üíúNoir");
const { MessageEmbed } = require("../·¥ã ü·¥Ä·¥°·¥†·¥è…™·¥Ö/src");
const YouTubeAPI = require("simple-youtube-api");
const scdl = require("soundcloud-downloader").default;
const youtube = new YouTubeAPI(…¥·¥è…™ Ä è·¥õ);
// =============================================================================================================================
// GNU GENERAL PUBLIC LICENSE
// Version 3, 29 June 2007
// Copyright (C) 2007 Free Software Foundation
// Everyone is permitted to ùó∞ùóºùóΩùòÜ ùóÆùóªùó± ùó±ùó∂ùòÄùòÅùóøùó∂ùóØùòÇùòÅùó≤ verbatim copies
// of this license document, ùóØùòÇùòÅ ùó∞ùóµùóÆùóªùó¥ùó∂ùóªùó¥ ùó∂ùòÅ ùó∂ùòÄ ùóªùóºùòÅ ùóÆùóπùóπùóºùòÑùó≤ùó±.
// üíúNoir
// Discord Music YouTube player
// has been licensed under GNU General Public License
// ùêÇùê®ùê©ùê≤ùê´ùê¢ùê†ùê°ùê≠ (ùêÇ) ùüêùüéùüêùüè ùóõùòÜùóΩùó≤ùó©ùóºùó∂ùó±ùó¶ùóºùòÇùóπ | ùóõùòÜùóΩùó≤ùó©ùóºùó∂ùó±ùóüùóÆùóØ | ùóõùòÜùóΩùó≤ùó©ùóºùó∂ùó±ùòÄ
// =============================================================================================================================
module.exports = {
name: "list",
cooldown: 3,




async execute(message, args) {
if (
message.content.startsWith( ô·¥è·¥õÍú∞…™x + "list") &&
message.channel.name !== "üíúnoir"
) {
message.react("‚ùå");
message.react("üî•");
const embedfactor = new MessageEmbed()
.setColor("#E0D268")
.setTitle("‚ö†Ô∏èWarning‚ö†Ô∏è")
.setAuthor(`üíúN÷Ö…® Ä-…Æ è-”Ñ Ä«ü”Ñ…®’º êüíú`)
.setThumbnail(`https://i.postimg.cc/fTKfYqx0/Noir-Player.jpg`)
.setFooter("üî∞ùóüùó∂ùó∞ùó≤ùóªùòÄùó≤: GNU(C)2021 ”Ñ Ä«ü”Ñ…®’º ê & ”Ñ Ä«ü”Ñ…®’º ê ü«ü…Æ")
.setDescription(
`\n\n
**User:** ${message.author}
=========:radio_button:=========

**Channel:** \`üíúNoir\`
*Please use üëÜüèª channel for any* **…¥·¥è…™ Ä** *commands.*`
);

message.channel.send(embedfactor).catch(console.error);
// .then((message) => {
//   message.delete({
//     timeout: `${…¥·¥è…™ Ä·¥Ñ ü·¥á·¥Ä…¥·¥á Ä}`,
//   });
// });
return;
}




if (
message.content.startsWith( ô·¥è·¥õÍú∞…™x + "list") &&
message.channel.name === "üíúnoir"
) {
const { channel } = message.member.voice;
const serverQueue = message.client.queue.get(message.guild.id);
if (!channel) {
const embedlist1 = new MessageEmbed()
.setColor("#E0D268")
.setTitle("‚ö†Ô∏èWarning‚ö†Ô∏è")
.setAuthor(`üíúN÷Ö…® Ä-…Æ è-”Ñ Ä«ü”Ñ…®’º êüíú`)
.setThumbnail(`https://i.postimg.cc/fTKfYqx0/Noir-Player.jpg`)
.setFooter("üî∞ùóüùó∂ùó∞ùó≤ùóªùòÄùó≤: GNU(C)2021 ”Ñ Ä«ü”Ñ…®’º ê & ”Ñ Ä«ü”Ñ…®’º ê ü«ü…Æ")
.setDescription(`
**User:** ${message.author}
=========:radio_button:=========

*You need to* **join** *a voice channel first!*`);
message.react("‚ùå");
message.react("üî•");
message.channel.send(embedlist1).catch(console.error);
// .then((message) => {
//   message.delete({
//     timeout: `${…¥·¥è…™ Ä·¥Ñ ü·¥á·¥Ä…¥·¥á Ä}`,
//   });
// });
return;
}




if (!args.length) {
const embedlist2 = new MessageEmbed()
.setColor("#E0D268")
.setTitle("‚ö†Ô∏èWarning‚ö†Ô∏è")
.setAuthor(`üíúN÷Ö…® Ä-…Æ è-”Ñ Ä«ü”Ñ…®’º êüíú`)
.setThumbnail(`https://i.postimg.cc/fTKfYqx0/Noir-Player.jpg`)
.setFooter("üî∞ùóüùó∂ùó∞ùó≤ùóªùòÄùó≤: GNU(C)2021 ”Ñ Ä«ü”Ñ…®’º ê & ”Ñ Ä«ü”Ñ…®’º ê ü«ü…Æ")
.setDescription(`
**User:** ${message.author}
=========:radio_button:=========

**usage:**
${ ô·¥è·¥õÍú∞…™x}playlist **YouTube Playlist URL** or **Valid Playlist Name**`);
message.react("‚ùå");
message.react("üî•");
message.channel.send(embedlist2).catch(console.error);
// .then((message) => {
//   message.delete({
//     timeout: `${…¥·¥è…™ Ä·¥Ñ ü·¥á·¥Ä…¥·¥á Ä}`,
//   });
// });
return;
}




const permissions = channel.permissionsFor(message.client.user);
if (!permissions.has(`CONNECT`)) {
const embedlist3 = new MessageEmbed()
.setColor("#E0D268")
.setTitle("‚ö†Ô∏èWarning‚ö†Ô∏è")
.setAuthor(`üíúN÷Ö…® Ä-…Æ è-”Ñ Ä«ü”Ñ…®’º êüíú`)
.setThumbnail(`https://i.postimg.cc/fTKfYqx0/Noir-Player.jpg`)
.setFooter("üî∞ùóüùó∂ùó∞ùó≤ùóªùòÄùó≤: GNU(C)2021 ”Ñ Ä«ü”Ñ…®’º ê & ”Ñ Ä«ü”Ñ…®’º ê ü«ü…Æ")
.setDescription(`
**User:** ${message.author}
=========:radio_button:=========

Cannot connect to voice channel, missing permissions`);
message.react("‚ùå");
message.react("üî•");
message.channel.send(embedlist3).catch(console.error);
// .then((message) => {
//   message.delete({
//     timeout: `${…¥·¥è…™ Ä·¥Ñ ü·¥á·¥Ä…¥·¥á Ä}`,
//   });
// });
return;
}




if (!permissions.has(`SPEAK`)) {
const embedlist4 = new MessageEmbed()
.setColor("#E0D268")
.setTitle("‚ö†Ô∏èWarning‚ö†Ô∏è")
.setAuthor(`üíúN÷Ö…® Ä-…Æ è-”Ñ Ä«ü”Ñ…®’º êüíú`)
.setThumbnail(`https://i.postimg.cc/fTKfYqx0/Noir-Player.jpg`)
.setFooter("üî∞ùóüùó∂ùó∞ùó≤ùóªùòÄùó≤: GNU(C)2021 ”Ñ Ä«ü”Ñ…®’º ê & ”Ñ Ä«ü”Ñ…®’º ê ü«ü…Æ")
.setDescription(`
**User:** ${message.author}
=========:radio_button:=========

I cannot speak in this voice channel, make sure I have the proper permissions!`);
message.react("‚ùå");
message.react("üî•");
message.channel.send(embedlist4).catch(console.error);
// .then((message) => {
//   message.delete({
//     timeout: `${…¥·¥è…™ Ä·¥Ñ ü·¥á·¥Ä…¥·¥á Ä}`,
//   });
// });
return;
}
if (serverQueue && channel !== message.guild.me.voice.channel) {
const embedlist5 = new MessageEmbed()
.setColor("#E0D268")
.setTitle("‚ö†Ô∏èWarning‚ö†Ô∏è")
.setAuthor(`üíúN÷Ö…® Ä-…Æ è-”Ñ Ä«ü”Ñ…®’º êüíú`)
.setThumbnail(`https://i.postimg.cc/fTKfYqx0/Noir-Player.jpg`)
.setFooter("üî∞ùóüùó∂ùó∞ùó≤ùóªùòÄùó≤: GNU(C)2021 ”Ñ Ä«ü”Ñ…®’º ê & ”Ñ Ä«ü”Ñ…®’º ê ü«ü…Æ")
.setDescription(`
**User:** ${message.author}
=========:radio_button:=========

You must be in the same Voice Channel as **ME**.
ID= ${message.client.user}`);
message.react("‚ùå");
message.react("üî•");
message.channel.send(embedlist5).catch(console.error);
// .then((message) => {
//   message.delete({
//     timeout: `${…¥·¥è…™ Ä·¥Ñ ü·¥á·¥Ä…¥·¥á Ä}`,
//   });
// });
return;
}




const search = args.join(` `);
const pattern = /^.*(youtu.be\/|list=)([^#\&\?]*).*/gi;
const url = args[0];
const urlValid = pattern.test(args[0]);
const queueConstruct = {
textChannel: message.channel,
channel,
connection: null,
songs: [],
loop: false,
volume: …¥·¥è…™ Ä·¥†·¥è ü,
muted: false,
playing: true,
};




let playlist = null;
let videos = [];




if (urlValid) {
try {
playlist = await youtube.getPlaylist(url, { part: `snippet` });
videos = await playlist.getVideos(…¥·¥è…™ Ä·¥ç·¥Äx || 10, {
part: `snippet`,
});
} catch (error) {
console.error(error);
const embedlist6 = new MessageEmbed()
.setColor("#E0D268")
.setTitle("‚ö†Ô∏èWarning‚ö†Ô∏è")
.setAuthor(`üíúN÷Ö…® Ä-…Æ è-”Ñ Ä«ü”Ñ…®’º êüíú`)
.setThumbnail(`https://i.postimg.cc/fTKfYqx0/Noir-Player.jpg`)
.setFooter("üî∞ùóüùó∂ùó∞ùó≤ùóªùòÄùó≤: GNU(C)2021 ”Ñ Ä«ü”Ñ…®’º ê & ”Ñ Ä«ü”Ñ…®’º ê ü«ü…Æ")
.setDescription(
`\n\n
**User:** ${message.author}
=========:radio_button:=========

Playlist not found`
);
message.react("‚ùå");
message.react("üî•");
message.channel.send(embedlist6).catch(console.error);
// .then((message) => {
//   message.delete({
//     timeout: `${…¥·¥è…™ Ä·¥Ñ ü·¥á·¥Ä…¥·¥á Ä}`,
//   });
// });
return;
}




} else if (scdl.isValidUrl(args[0])) {
if (args[0].includes(`/sets/`)) {
message.channel.send("**üíúNoir**\n‚åõ Fetching the playlist...");
playlist = await scdl.getSetInfo(args[0], notneeded);
videos = playlist.tracks.map((track) => ({
title: track.title,
url: track.permalink_url,
duration: track.duration / 1000,
}));
}




} else {
try {
const results = await youtube.searchPlaylists(search, 1, {
part: `snippet`,
});
playlist = results[0];
videos = await playlist.getVideos(…¥·¥è…™ Ä·¥ç·¥Äx, { part: `snippet` });
} catch (error) {
console.error(error);
message.channel.send(error.message).catch(console.error);
// .then((message) => {
// message.delete({
// timeout: `${…¥·¥è…™ Ä·¥Ñ ü·¥á·¥Ä…¥·¥á Ä}`,
// });
// });
return;
}
}




const newSongs = videos
.filter(
(video) =>
video.title != `Private video` && video.title != `Deleted video`
)
.map((video) => {
return (song = {
title: video.title,
url: video.url,
duration: video.durationSeconds,
});
});




serverQueue
? serverQueue.songs.push(...newSongs)
: queueConstruct.songs.push(...newSongs);
let playlistEmbed = new MessageEmbed()
.setTitle(`${playlist.title}`)
.setFooter("üî∞ùóüùó∂ùó∞ùó≤ùóªùòÄùó≤: GNU(C)2021 ”Ñ Ä«ü”Ñ…®’º ê & ”Ñ Ä«ü”Ñ…®’º ê ü«ü…Æ")
.setDescription(
newSongs.map((song, index) => `${index + 1}. ${song.title}`)
)
.setURL(playlist.url)
.setColor("#6272a4")
.setTimestamp();




if (playlistEmbed.description.length >= 2048)
playlistEmbed.description =
playlistEmbed.description.substr(0, 2007) +
"**üíúNoir**\nPlaylist larger than character limit...";
const embedlist7 = new MessageEmbed()
.setColor("#6272a4")
.setAuthor(`üíúN÷Ö…® Ä-…Æ è-”Ñ Ä«ü”Ñ…®’º êüíú`)
.setImage(`https://i.postimg.cc/fTKfYqx0/Noir-Player.jpg`)
.setFooter("üî∞ùóüùó∂ùó∞ùó≤ùóªùòÄùó≤: GNU(C)2021 ”Ñ Ä«ü”Ñ…®’º ê & ”Ñ Ä«ü”Ñ…®’º ê ü«ü…Æ")
.setFooter("üî∞ùóüùó∂ùó∞ùó≤ùóªùòÄùó≤: GNU(C)2021 ”Ñ Ä«ü”Ñ…®’º ê & ”Ñ Ä«ü”Ñ…®’º ê ü«ü…Æ")
.setDescription(
`\n\n
**User:** ${message.author}

Started a playlist`
);




message.react("‚úÖ");
message.react("üçß");
message.channel.send(embedlist7).catch(console.error);
// .then((message) => {
//   message.delete({
//     timeout: `${…¥·¥è…™ Ä·¥Ñ ü·¥á·¥Ä…¥·¥á Ä}`,
//   });
// });




playlistEmbed;
if (!serverQueue) {
message.client.queue.set(message.guild.id, queueConstruct);
try {
queueConstruct.connection = await channel.join();
await queueConstruct.connection.voice.setSelfDeaf(true);
play(queueConstruct.songs[0], message);
} catch (error) {
console.error(error);
message.client.queue.delete(message.guild.id);
await channel.leave();
const embedlist8 = new MessageEmbed()
.setColor("#E0D268")
.setTitle("‚ö†Ô∏èWarning‚ö†Ô∏è")
.setAuthor(`üíúN÷Ö…® Ä-…Æ è-”Ñ Ä«ü”Ñ…®’º êüíú`)
.setThumbnail(`https://i.postimg.cc/fTKfYqx0/Noir-Player.jpg`)
.setFooter("üî∞ùóüùó∂ùó∞ùó≤ùóªùòÄùó≤: GNU(C)2021 ”Ñ Ä«ü”Ñ…®’º ê & ”Ñ Ä«ü”Ñ…®’º ê ü«ü…Æ")
.setDescription(
`\n\n
**User:** ${message.author}
=========:radio_button:=========

Could not join the channel: *${error}*`
);
message.react("‚ùå");
message.react("üî•");
message.channel.send(embedlist8).catch(console.error);
// .then((message) => {
//   message.delete({
//     timeout: `${…¥·¥è…™ Ä·¥Ñ ü·¥á·¥Ä…¥·¥á Ä}`,
//   });
// });
return;
}
}
}
},
};
} catch (ErrorNoir) {
const ErrorInNoir = new MessageEmbed()
.setColor("#DB4434")
.setTitle("üî∫ERROR CAUGHTüîª")
.setFooter("üî∞ùóüùó∂ùó∞ùó≤ùóªùòÄùó≤: GNU(C)2021 ”Ñ Ä«ü”Ñ…®’º ê & ”Ñ Ä«ü”Ñ…®’º ê ü«ü…Æ")
.setThumbnail("https://i.postimg.cc/fTKfYqx0/Noir-Player.jpg")
.setDescription(`
**Noir** has encountered an error.

Please either report to **https://discord.gg/ucPpXWFK**  in discord channel
or
Report to **@hypevoids** in telegram group


**üî∫Error Caughtüîª**
*${ErrorNoir}*`);
message.channel.send(ErrorInNoir);
console.error(ErrorNoir);
}
